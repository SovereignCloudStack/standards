---
title: ADR SCS Entropy
version: 2023-02-06-001
authors: Mathias Fechner
state: v0.9
---

## 1. Terminology of Entropy

### 1.1. Entropy in information Technology

    Entropy is a concept that is widely used in a scope of information 
    technology. It is a measure of the amount of disorder or randomness in
    a system. Entropy is used to measure the amount of information in a
    self contained systems, as well as the amount of incertitude that exists
    in this system. For cryptographic procedures and operations good entropy 
    is a must have!  

    In traditional Baremetal System the amount of incertitude is or was generated by the randomness Ready/write cycle of the disk heads of a disk-drive, bus timings or
    Keyboard Timings.

### 1.2 Entropy in Virtual Instances

     A virtual instance or virtual machines does not have these sources for random numbers. An instance will operate normally, but if cryptographic operations will happen, Procedures will take an abnormal long time, because with a small entropy
     count cryptographic operation can not operate in realtime. 
     Examples are malfunctioning applications and OpenSSL operations that will not work. 

``
     #cat /proc/sys/kernel/random/entropy_avail 
     256
``

#### 1.2.1 How to generate Entropy "Out-Of-Nothing" ?

    One Procedure from the past in virtual machines or virtual appliances
    is to use an entropy daemon, in order to ensure to have a sufficient amount of entropy. Today this is a common operation although for embedded devices.
    HavegeD is one example which use the combination of the Linux random device

    [haveged](http://www.issihosts.com/haveged/)

``
     #cat /proc/sys/kernel/random/entropy_avail 
      1956
``

#### 1.2.2 CPU Hardware random number generator

     Modern Server CPU's of ARM, AMD and Intel ship Hardware random 
     number generator. This Feature will pass-through to the virtualization
     layer. This will addressed by virtio-rng.

     On Baremetal-systems and virtual Instances will need the rng-tools or 
     rng-utils, which will need to running.

``
     #cat /proc/sys/kernel/random/entropy_avail
     3843
``

### 1.3  Entropy in SCS Clouds

    All flavors will have to have the relevant attributed activated:
    
    ```
    hw_rng:allowed=True
    hw_rng:rate_bytes - The allowed amount of bytes for the the guest to read from the hostâ€™s entropy per period. hw_rng:rate_period
    ```
    
    Images must activate the[ attribute hw_rng_model: virtio
    On compute nodes the rng-utils must be activated.
    tThis is a requirement to guarantee working confident cryptography
    in SCS Cloud Infrastructures.  